<div th:fragment="subfragment" class="page-wrapper">  
  <div class="page-wrapper bg-white ps-4 pe-4 mt-4 mb-4">
    <div class="container">
      <!-- Page title -->
      <div class="page-header d-print-none">
        <div class="row g-2 align-items-center">
          <div class="col">
            <h2 class="page-title mb-3">
              <span class="me-2">Danh sách nhân viên</span>
              <span type="text" class="badge fs-5 bg-danger">[[${employees.size() + ' nhân viên'}]]</span>
            </h2>
            
            <div class="d-flex justify-content-between">
              <form th:action="@{/account/search}" method="get">
                <input name="keyword" type="text" style="width: 300px; height: 35px; padding-left: 10px;" placeholder="Tìm kiếm với username ...">
                <button type="submit" class="btn btn-light">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                  </svg>
                </button>
              </form>
              

              <a href="#" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal-employee" role="button">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                Thêm nhân viên
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="page-body">
      <div class="container-xl">
        <div class="row row-cards">
          <div class="table-responsive">
            <table class="table table-borderless table-hover card-table">
              <thead>
                <tr>
                  <th>STT.</th>
                  <th>Username</th>
                  <th>Họ tên</th>
                  <th>Email</th>
                  <th>Số điện thoại</th>
                  <th>Lương cố định</th>
                  <th>Khác</th>
                </tr>
              </thead>
              <tbody class="bg-light">
                <tr th:each="e, index : ${employees}">
                  <td class="text-primary" style="font-weight: 500;">[[${index.index + 1}]]</td>
                  <td class="text-muted">[[${e.username}]]</td>
                  <td class="text-muted">[[${e.fullname}]]</td>                          
                  <td class="text-muted">[[${e.email}]]</td>
                  <td class="text-muted">[[${e.phone}]]</td>
                  <th class="text-muted">4,500,000 đ</th>
                  <td>
                    <a href="#" class="bg-white p-2" data-bs-toggle="modal" th:data-bs-target="${'#modal-delete-' + e.username}"  style="border-radius: 50%;">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" style="color: red;" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <line x1="4" y1="7" x2="20" y2="7"></line>
                        <line x1="10" y1="11" x2="10" y2="17"></line>
                        <line x1="14" y1="11" x2="14" y2="17"></line>
                        <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>
                        <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>
                     </svg>
                    </a>


                    <div class="modal modal-blur fade" th:id="${'modal-delete-' + e.username}" tabindex="-1" role="dialog" aria-hidden="true">
                      <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
                        <div class="modal-content">
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          <div class="modal-status bg-danger"></div>
                          <div class="modal-body text-center py-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon mb-2 text-danger icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 9v2m0 4v.01"></path><path d="M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75"></path></svg>
                            <h3 class="text-dark">Xóa nhân viên <span class="text-dark">' [[${e.username}]] '</span> này ?</h3>
                            
                            <div class="text-muted">Tất cả các dữ liệu về nhân viên này sẽ bị xóa vĩnh viễn trong server. Xin cẩn thận khi thao tác !</div>
                          </div>
                          <div class="modal-footer">
                            <div class="w-100">
                              <div class="row">
                                <div class="col">
                                  <a href="#" class="btn btn-light w-100" data-bs-dismiss="modal">
                                    Hủy thao tác
                                  </a>
                                </div>
                                <div class="col">
                                  <a th:href="${'/account/delete/'+e.username}" class="btn btn-danger w-100">
                                    Xóa nhân viên
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </td> 
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>



    <!-- modal add employee -->
    <div class="modal modal-blur fade" id="modal-employee" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content p-2">
          <div class="modal-header">
            <h5 class="modal-title text-primary">Biểu mẫu thêm nhân viên</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form method="post" action="/account/add" th:object="${staff}">
              <div class="form-group mb-2">
                <label for="username"><b class="text-danger">*</b> Username:</label>
                <input type="text" th:field="*{username}" class="form-control" name="username" autocomplete="off">
              </div>
              <div class="form-group mb-2">
                <label for="email"><b class="text-danger">*</b> Email:</label>
                <input type="email" th:field="*{email}" class="form-control" name="email" autocomplete="off">
              </div>
              <div class="form-group mb-2">
                <label for="pwd"><b class="text-danger">*</b> Password:</label>
                <input type="password" th:field="*{password}" class="form-control" name="pwd" autocomplete="off">
              </div>
              <div class="form-group mb-2">
                <label for="fullname"><b class="text-danger">*</b> Fullname:</label>
                <input type="text" th:field="*{fullname}" class="form-control" name="fullname" autocomplete="off">
              </div>
              <div class="form-group mb-2">
                <label for="phone"><b class="text-danger">*</b> Phone:</label>
                <input type="text" th:field="*{phone}" class="form-control" name="phone" autocomplete="off">
              </div>
              <button type="submit" class="btn btn-primary mt-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                Add employee
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>