<div th:fragment="subfragment" class="page-wrapper">
  <div class="container py-4" ng-controller="product-ctrl">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Sản phẩm</h3>
      </div>
      <div class="card-body border-bottom py-3">
        <div class="d-flex">
          <div class="text-muted">
            Hiển thị
            <div class="mx-2 d-inline-block">
              <input type="text" class="form-control form-control-sm text-center" ng-model="items.length" size="3" aria-label="Invoices count" disabled>
            </div>
            sản phẩm
          </div>

          <div class="ms-auto text-muted d-flex justify-content-center">
              <!-- this is filter products -->
            <input type="text" ng-model="getItems" class="form-control me-3" placeholder="Nhập từ khóa tìm kiếm sản phẩm ..." style="width: 350px;">

            <!-- this is button to open form -->
            <button ng-click="reset()" class="btn btn-success d-none d-sm-inline-block" data-bs-toggle="modal" data-bs-target="#modal-product" style="text-decoration: none;">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <line x1="12" y1="5" x2="12" y2="19" />
                <line x1="5" y1="12" x2="19" y2="12" />
              </svg>
              Thêm sản phẩm
            </button>
          </div>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table table-hover table-borderless">
          <thead>
            <tr>
              <th class="w-1"></th>
              <th class="w-1">Id.
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-sm text-dark icon-thick" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="6 15 12 9 18 15" /></svg>
              </th>
              <th>Tên sản phẩm.</th>
              <th>Hình ảnh.</th>
              <th>Số lượng.</th>
              <th>Giá cả.</th>
              <th>Ngày tạo ra.</th>
              <th>Trạng thái.</th>
              <th>Loại hàng.</th>
              <th></th>
            </tr>
          </thead>
          <tbody>

            <!-- this is tr -->
            <tr ng-repeat="item in items | filter : getItems | orderBy : 'name'">
              <td></td>
              <td><span class="text-muted">{{ item.id }}</span></td>
              <td class="text-reset">{{ item.name }}</td>
              <td>
                <img class="bg-white" src="/dist/img/products/{{item.image}}" width="37px" height="37px" style="margin-right: 10px;">
                <a href="/user/detail/{{item.id}}">{{ item.image }}</a>
              </td>
              <th>{{ item.number }}</th>
              <td>
                <strong style="font-weight: bolder;">$</strong> {{ item.price }}
              </td>
              <td>
                {{ item.createDate | date:'dd-MM-yyyy'}}
              </td>
              <td>
                <span class="badge bg-{{item.number != 0 && item.category.status != false ? 'success' : 'danger'}} me-1"></span> 
                {{ item.number != 0 && item.category.status != false ? 'Còn bán' : 'Hết bán' }}
              </td>
              <td> {{ item.category.name }} </td>
              <td class="text-end">

                <!-- this is edit -->
                <a ng-click="edit(item.id)"  class="btn btn-default d-none d-sm-inline-block" data-bs-toggle="modal" data-bs-target="#modal-product" style="text-decoration: none;">
                    Open Detail
                </a>
              </td>
            </tr>

          </tbody>
        </table>
      </div>
      <div class="card-footer d-flex align-items-center">
        <p class="m-0 text-muted">Showing <span>1</span> to <span>8</span> of <span>{{items.length}}</span> entries</p>
        <ul class="pagination m-0 ms-auto">
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="15 6 9 12 15 18" /></svg>
              prev
            </a>
          </li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item"><a class="page-link" href="#">4</a></li>
          <li class="page-item"><a class="page-link" href="#">5</a></li>
          <li class="page-item">
            <a class="page-link" href="#">
              next
              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="9 6 15 12 9 18" /></svg>
            </a>
          </li>
        </ul>
      </div>
    </div>





    <!-- this is modal -->
    <div class="modal modal-blur fade" id="modal-product" tabindex="-1" role="dialog" aria-hidden="true" style="transition: 0.2s;">
      <div class="modal-dialog modal-lg" role="document">
        <form method="post" class="modal-content" th:object="${product}">
          <div class="modal-header">
            <h5 class="modal-title">Chi tiết sản phẩm</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label class="form-label">Tên sản phẩm</label>

              <!-- this is model name of form product -->
              <input type="text" ng-model="form.name" th:field="*{name}" class="form-control text-primary" name="example-text-input" placeholder="Nhập tên sản phẩm ...">
            </div>
            <label class="form-label">Nhập thêm số lượng</label>
            <div class="form-selectgroup-boxes row mb-3">
              <div>
                <input type="number" ng-model="form.number" min="0" th:field="*{number}" class="form-control ps-2" autocomplete="off">
              </div>
            </div>
            <div class="row">
              <div class="col-lg-8">
                <div class="mb-3">
                  <label class="form-label">Giá sản phẩm</label>
                  <div class="input-group input-group-flat">

                    <!-- this is price of product -->
                    <input type="number" ng-model="form.price" min="1" th:field="*{price}" class="form-control ps-2" autocomplete="off">
                  </div>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="mb-3">
                  <label class="form-label">Thể loại sản phẩm</label>

                  <!-- this is category -->
                  <select class="form-select" ng-model="form.category.id" th:field="*{category}">
                    <option th:each="c : ${categories}" th:value="${c.id}">[[${c.name}]]</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-lg-6">
                <div class="mb-3">
                  <label class="form-label">Chọn ảnh</label>

                  <!-- this is file -->
                  <input type="file" class="form-control" ng-model="form.image" id="form-image" th:field="*{image}">
                </div>
              </div>
              <div class="col-lg-6">
                <div class="mb-3">
                  <label class="form-label">Ngày thêm sản phẩm</label>

                  <!-- this is date -->
                  <input type="date" class="form-control" ng-model="form.createDate" th:field="*{createDate}">
                </div>
              </div>
            </div>
          </div>

          <!-- this is for edit to update and delete -->
          <div class="modal-footer">
            <a href="#" ng-click="create()" ng-if="open == 0" class="btn btn-success" data-bs-dismiss="modal">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-ballpen" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M14 6l7 7l-4 4"></path>
                <path d="M5.828 18.172a2.828 2.828 0 0 0 4 0l10.586 -10.586a2 2 0 0 0 0 -2.829l-1.171 -1.171a2 2 0 0 0 -2.829 0l-10.586 10.586a2.828 2.828 0 0 0 0 4z"></path>
                <path d="M4 20l1.768 -1.768"></path>
              </svg>
              Lưu trữ
            </a>
            <a href="#" ng-click="update()" ng-if="open == 1" class="btn btn-primary" data-bs-dismiss="modal">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-ballpen" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M14 6l7 7l-4 4"></path>
                <path d="M5.828 18.172a2.828 2.828 0 0 0 4 0l10.586 -10.586a2 2 0 0 0 0 -2.829l-1.171 -1.171a2 2 0 0 0 -2.829 0l-10.586 10.586a2.828 2.828 0 0 0 0 4z"></path>
                <path d="M4 20l1.768 -1.768"></path>
              </svg>
              Cập nhật
            </a>
            <a href="#" ng-click="delete(form.id)" ng-if="open == 1" class="btn btn-danger" data-bs-dismiss="modal">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <rect x="3" y="4" width="18" height="4" rx="2"></rect>
                <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"></path>
                <line x1="10" y1="12" x2="14" y2="12"></line>
              </svg>
              Xóa vĩnh viễn
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>