<div th:fragment="subfragment" class="page-wrapper">
  <style>
    .mt100 {
      padding-top: 420px;
    }
    input {
      padding-left: 5px;
    }
  </style>
  <div class="container d-flex justify-content-center">
    <div class="page">
      <div class="page-wrapper" ng-controller="report-staff-ctrl">
        <div class="container-xl">
          <!-- Page title -->
          <div class="page-header d-print-none">
            <div class="row g-2 align-items-center">
              <div class="col"></div>

              <!-- Page title actions -->
              <div class="col-12 col-md-auto ms-auto d-print-none">
                <button class="btn btn-default">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="me-2 bi bi-calendar-month" viewBox="0 0 16 16">
                    <path d="M2.56 11.332 3.1 9.73h1.984l.54 1.602h.718L4.444 6h-.696L1.85 11.332h.71zm1.544-4.527L4.9 9.18H3.284l.8-2.375h.02zm5.746.422h-.676V9.77c0 .652-.414 1.023-1.004 1.023-.539 0-.98-.246-.98-1.012V7.227h-.676v2.746c0 .941.606 1.425 1.453 1.425.656 0 1.043-.28 1.188-.605h.027v.539h.668V7.227zm2.258 5.046c-.563 0-.91-.304-.985-.636h-.687c.094.683.625 1.199 1.668 1.199.93 0 1.746-.527 1.746-1.578V7.227h-.649v.578h-.019c-.191-.348-.637-.64-1.195-.64-.965 0-1.64.679-1.64 1.886v.34c0 1.23.683 1.902 1.64 1.902.558 0 1.008-.293 1.172-.648h.02v.605c0 .645-.423 1.023-1.071 1.023zm.008-4.53c.648 0 1.062.527 1.062 1.359v.253c0 .848-.39 1.364-1.062 1.364-.692 0-1.098-.512-1.098-1.364v-.253c0-.868.406-1.36 1.098-1.36z"/>
                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                  </svg>
                  Đặt lịch
                </button>
                <button class="btn btn-primary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="me-2 bi bi-send" viewBox="0 0 16 16">
                    <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"/>
                  </svg>
                  Gửi ngay
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="page-body mb-4">
          <div class="container">
            <div class="card">
              <div class="card-body border">
                <div class="col-sm-12">
                  <div class="card" style="background-color: rgb(252, 231, 207)">
                    <div class="card-body">
                      <h1 class="card-title text-center fs-1 mt-4">BẢNG BÁO CÁO THỐNG KÊ HẰNG TUẦN</h1>
                      <p class="text-center">............oOo............</p>
                      <div class="modal-body">
                        <div class="mb-3">
                          <p>- Ngày báo cáo hôm nay : [[${now}]]</p>
                          <p>- Địa điểm trụ sở : 123 Tôn Đức Thắng, Quận Thanh Khê, TP.Đà Nẵng</p>
                          <p>- Liên hệ thông tin : [[${auth.account.phone}]]</p>
                          <label class="form-label mt-4">Tên người thực hiện :</label>
                          <input type="text" class="form-control" name="example-text-input" th:value="${auth.account.fullname}" readonly>
                        </div>
                        <div class="mb-1">
                          <label class="form-label">Chọn báo cáo :</label>
                          <div class="form-group">
                            <select class="form-control" onchange="reportNumber()" id="select-report">
                              <option value="1">Báo cáo doanh thu từng sản phẩm</option>
                              <option value="2">Báo cáo doanh thu từng mặt hàng</option>
                              <option value="3">Báo cáo lương nhân viên</option>
                              <option value="4">Thống kê hàng đang tồn kho</option>
                            </select>
                          </div>
                        </div>
                      </div>

                      <!-- report báo cáo số lượng -->
                      <div class="card" id="report-id-1">
                        <div class="table-responsive">
                          <table class="table card-table table-vcenter text-nowrap datatable">
                            <thead>
                              <tr>
                                <th>Tên sản phẩm</th>
                                <th>Số lượng bán</th>
                                <th>Đơn giá ($)</th>
                                <th>Doanh thu VNĐ</th>
                                <th>Chi phí VNĐ</th>
                                <th>Lợi nhuận VNĐ</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr ng-if="indexes_1.length > 0" ng-repeat="n in indexes_1">
                                <td>
                                  <input type="text" style="width: 290px;" value="{{n.name}}"  data-bs-toggle="modal" data-bs-target="#modal-report-id-1" readonly />
                                </td>
                                <td>
                                  <input type="number" style="width: 100px;" ng-model="n_1" placeholder="-" />
                                </td>
                                <td>
                                  <input type="number" style="width: 150px;" value="{{n.price}}" placeholder="-" disabled />
                                </td>
                                <td>
                                  <input type="number" style="width: 160px;" value="{{n_1 * n.price *100/100}}" disabled />
                                </td>
                                <td>
                                  <input type="number" style="width: 160px;" ng-model="n_3" placeholder="-">
                                </td>
                                <td>
                                  <input type="number" style="width: 110px;" value="{{ (n_1 * n.price - n_3).toFixed(2) }}" disabled />
                                </td>
                              </tr>

                              <tr ng-if="indexes_1.length == 0">
                                <td>
                                  <input type="text" value="-" style="width: 290px; border: 1px solid green;" data-bs-toggle="modal" data-bs-target="#modal-report-id-1" readonly>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 100px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 150px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 160px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 160px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 110px;" disabled>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>


                      
                      <div class="modal modal-blur fade" id="modal-report-id-1" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title">LỰA CHỌN SẢN PHẨM</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <label class="ms-3 mt-2">Tìm kiếm</label>
                            <div class="row me-3 ms-3 pb-2 border-bottom">
                              <input type="text" ng-model="getItems" placeholder="Nhập từ khóa ..." class="fs-5 p-2">
                            </div>
                            <div class="modal-body">
                              <!-- this is show all of order before -->
                              <div class="row d-flex justify-content-between align-items-center bg-white p-2 border mb-2" ng-repeat="product in items|filter:getItems">
                                  <span class="text-truncate">
                                    <input type="checkbox" id="pro-name-{{product.id}}" ng-click="add_1(product)" class="me-2">
                                    <label for="pro-name-{{product.id}}">{{product.name}}</label>
                                  </span>
                              </div>
                  
                            </div>
                            <div class="modal-footer">
                              <button class="btn mt-2" data-bs-dismiss="modal">
                                Chấp nhận
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--  -->



                      <!-- report báo cáo category -->
                      <div class="card" id="report-id-2">
                        <div class="table-responsive">
                          <table class="table card-table table-vcenter text-nowrap datatable">
                            <thead>
                              <tr>
                                <th>Thể loại sản phẩm</th>
                                <th>Doanh thu nay (VND)</th>
                                <th>Chi phí nhập hàng</th>
                                <th>Lợi nhuận</th>
                                <th>Tỷ suất lợi nhuận %</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr ng-if="indexes_2.length > 0" ng-repeat="c in indexes_2">
                                <td>
                                  <input type="text" style="width: 150px;" value="{{c.name}}" data-bs-toggle="modal" data-bs-target="#modal-report-id-2" readonly>
                                </td>
                                <td>
                                  <input type="number" style="width: 230px;" ng-model="c_1" placeholder="-"/>
                                </td>
                                <td>
                                  <input type="number" style="width: 230px;" ng-model="c_2" placeholder="-"/>
                                </td>
                                <td>
                                  <input type="number" style="width: 220px;" value="{{ c_1 - c_2 }}" disabled />
                                </td>
                                <td>
                                  <input type="number" style="width: 130px;" value="{{ (((c_1 - c_2)*100/c_1)).toFixed(2)  }}" disabled />
                                </td>
                              </tr>

                              <tr ng-if="indexes_2.length == 0">
                                <td>
                                  <input type="text" style="width: 150px; border: 1px solid green;" value="-" data-bs-toggle="modal" data-bs-target="#modal-report-id-2" readonly>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 230px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 230px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 220px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 130px;" disabled>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>


                      <div class="modal modal-blur fade" id="modal-report-id-2" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title">LỰA CHỌN THỂ LOẠI SẢN PHẨM</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <label class="ms-3 mt-2">Tìm kiếm</label>
                            <div class="row me-3 ms-3 pb-2 border-bottom">
                              <input type="text" ng-model="getCate" placeholder="Nhập từ khóa ..." class="fs-5 p-2">
                            </div>
                            <div class="modal-body">
                              <!-- this is show all of order before -->
                              <div class="row d-flex justify-content-between align-items-center bg-white p-2 border mb-2" ng-repeat="category in categories|filter:getCate">
                                  <span class="text-truncate">
                                    <input type="checkbox" id="cat-name-{{category.id}}" ng-click="add_2(category)" class="me-2">
                                    <label for="cat-name-{{category.id}}">{{category.name}}</label>
                                  </span>
                              </div>
                  
                            </div>
                            <div class="modal-footer">
                              <button class="btn mt-2" data-bs-dismiss="modal">
                                Chấp nhận
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--  -->



                      <!-- report báo cáo lương nhân viên -->
                      <div class="card" id="report-id-3">
                        <div class="table-responsive">
                          <table class="table card-table table-vcenter text-nowrap datatable">
                            <thead>
                              <tr>
                                <th>ID</th>
                                <th>Tên nhân viên</th>
                                <th>Lương cứng VNĐ</th>
                                <th>Tiền trọ cấp VNĐ</th>
                                <th>Tổng tiền VNĐ</th>
                                <th>Chức vụ</th>
                                <th>Đã buổi vắng</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr ng-if="indexes_3.length > 0" ng-repeat="e in indexes_3">
                                <td>
                                  <input type="text" style="width: 120px;" value="{{e.account.username}}" data-bs-toggle="modal" data-bs-target="#modal-report-id-3" disabled>
                                </td>
                                <td>
                                  <input type="text" style="width: 200px;" value="{{e.account.fullname}}" readonly>
                                </td>
                                <td>
                                  <input type="number" style="width: 150px;" ng-model="e_1" placeholder="-">
                                </td>
                                <td>
                                  <input type="number" style="width: 150px;" ng-model="e_2" placeholder="-">
                                </td>
                                <td>
                                  <input type="number" style="width: 150px;" value="{{ (e_1+e_2).toFixed(2) }}" placeholder="-">
                                </td>
                                <td>
                                  <input type="text" style="width: 130px;" value="{{e.role.name}}" disabled>
                                </td>
                                <td>
                                  <input type="number" style="width: 90px;" value="0" min="0">
                                </td>
                              </tr>

                              <tr ng-if="indexes_3.length == 0">
                                <td>
                                  <input type="text" style="width: 120px; border: 1px solid green;" value="-" data-bs-toggle="modal" data-bs-target="#modal-report-id-3" readonly>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 200px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 150px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 150px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 150px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 130px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 90px;" disabled>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>

                      <div class="modal modal-blur fade" id="modal-report-id-3" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title">LỰA CHỌN NHÂN VIÊN</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <label class="ms-3 mt-2">Tìm kiếm</label>
                            <div class="row me-3 ms-3 pb-2 border-bottom">
                              <input type="text" ng-model="getEmploy" placeholder="Nhập từ khóa ..." class="fs-5 p-2">
                            </div>
                            <div class="modal-body">
                              <!-- this is show all of order before -->
                              <div class="row d-flex justify-content-between align-items-center bg-white p-2 border mb-2" ng-repeat="auth in authorities|filter:getEmploy">
                                  <span class="text-truncate">
                                    <input type="checkbox" id="emp-name-{{auth.account.username}}" ng-click="add_3(auth)" class="me-2">
                                    <label for="emp-name-{{auth.account.username}}">{{auth.account.username}} - {{auth.account.fullname}}</label>
                                  </span>
                              </div>
                  
                            </div>
                            <div class="modal-footer">
                              <button class="btn mt-2" data-bs-dismiss="modal">
                                Chấp nhận
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--  -->


                      <!-- report báo cáo tồn kho -->
                      <div class="card" id="report-id-4">
                        <div class="table-responsive">
                          <table class="table card-table table-vcenter text-nowrap datatable">
                            <thead>
                              <tr>
                                <th>Tên sản phẩm</th>
                                <th>Đơn giá</th>
                                <th>Số lượng tồn</th>
                                <th>Số lượng đã bán</th>
                                <th>Tổng tiền lỗ</th>
                                <th>Tiền đang thu hồi</th>
                                <th>Tiền hòa vốn</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr ng-if="indexes_4.length > 0" ng-repeat="p in indexes_4">
                                <td>
                                  <input type="text" style="width: 250px;" value="{{p.name}}" data-bs-toggle="modal" data-bs-target="#modal-report-id-4" readonly>
                                </td>
                                <td>
                                  <input type="number" style="width: 100px;" value="{{ p.price }}" placeholder="-" disabled>
                                </td>
                                <td>
                                  <input type="number" style="width: 100px;" ng-model="pr_1" placeholder="-">
                                </td>
                                <td>
                                  <input type="number" style="width: 120px;" ng-model="pr_2" placeholder="-">
                                </td>
                                <td>
                                  <input type="number" style="width: 120px;" value="{{ (pr_1 * p.price).toFixed(2) }}" placeholder="-" readonly />
                                </td>
                                <td>
                                  <input type="number" style="width: 140px;" value="{{ (pr_2 * p.price).toFixed(2) }}" placeholder="-" readonly />
                                </td>
                                <td>
                                  <input type="number" style="width: 100px;" value="{{( (pr_1 * p.price) - (pr_2 * p.price)).toFixed(2)}}" placeholder="-" readonly>
                                </td>
                              </tr>

                              <tr ng-if="indexes_4.length == 0">
                                <td>
                                  <input type="text" value="-" style="width: 250px; border: 1px solid green;" data-bs-toggle="modal" data-bs-target="#modal-report-id-4" readonly>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 100px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 100px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 120px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 120px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 140px;" disabled>
                                </td>
                                <td>
                                  <input type="text" value="-" style="width: 100px;" disabled>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>

                      
                      <div class="modal modal-blur fade" id="modal-report-id-4" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title">LỰA CHỌN SẢN PHẨM</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <label class="ms-3 mt-2">Tìm kiếm</label>
                            <div class="row me-3 ms-3 pb-2 border-bottom">
                              <input type="text" ng-model="getStock" placeholder="Nhập từ khóa ..." class="fs-5 p-2">
                            </div>
                            <div class="modal-body">
                              <div class="row d-flex justify-content-between align-items-center bg-white p-2 border mb-2" ng-repeat="product in stocks|filter:getStock">
                                  <span class="text-truncate">
                                    <input type="checkbox" id="stock-name-{{product.id}}" ng-click="add_4(product)" class="me-2">
                                    <label for="stock-name-{{product.id}}">{{product.name}}</label>
                                  </span>
                              </div>
                  
                            </div>
                            <div class="modal-footer">
                              <button class="btn mt-2" data-bs-dismiss="modal">
                                Chấp nhận
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
